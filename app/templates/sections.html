{% extends 'base.html' %}
{% block title %}–†–∞–∑–¥–µ–ª—ã{% endblock %}

{% block content %}
<h2 class="mb-4">–†–∞–∑–¥–µ–ª—ã –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º</h2>

<!-- üîç –ü–æ–∏—Å–∫ -->
<form method="get" class="mb-4 row g-3">
  <div class="col-md-6">
    <input type="text" name="q" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." value="{{ query }}">
  </div>
  <div class="col-md-2">
    <button type="submit" class="btn btn-outline-primary">–ü–æ–∏—Å–∫</button>
  </div>
</form>

<!-- ‚ûï –¢–æ–ª—å–∫–æ –∫—É—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª -->
{% if is_curator %}
  <a href="{% url 'section_create' %}" class="btn btn-primary mb-4">+ –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª</a>
{% endif %}

{% if sections %}
  <div class="row row-cols-1 row-cols-md-2 g-4">
    {% for section in sections %}
      <div class="col">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">

            <!-- üîó –ù–∞–∑–≤–∞–Ω–∏–µ ‚Äî —Å—Å—ã–ª–∫–∞ -->
            <h5 class="card-title">
              <a href="{% url 'index' %}?section={{ section.id }}" class="text-decoration-none">
                {{ section.name }}
              </a>
            </h5>

            <p class="card-text text-muted">{{ section.description|truncatewords:25 }}</p>

            <div class="mt-auto">
              <p class="card-text mb-1">
                <small class="text-muted">–ü—Ä–æ–≥—Ä–∞–º–º: {{ section.programs_count }}</small>
              </p>
              <p class="card-text">
                <small class="text-muted">–ú–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: {{ section.materials_count }}</small>
              </p>
            </div>
          </div>

          {% if is_curator %}
            <div class="card-footer d-flex justify-content-between">
              <div class="btn-group btn-group-sm" role="group">
                <a href="{% url 'section_edit' section.id %}" class="btn btn-outline-secondary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'section_delete' section.id %}" class="btn btn-outline-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª?')">–£–¥–∞–ª–∏—Ç—å</a>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">–†–∞–∑–¥–µ–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
{% endif %}
{% endblock %}
